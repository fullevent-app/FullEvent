---
title: SamplingConfig
description: Configuration for tail-based sampling.
---

# SamplingConfig

Configuration for tail-based sampling.

Tail sampling makes the decision AFTER the request completes,
allowing you to keep all errors and slow requests while sampling
normal traffic. This gives you 100% visibility into problems.

## Usage

```typescript
const sampling: SamplingConfig = {
  defaultRate: 0.1,            // Keep 10% of normal requests
  alwaysKeepErrors: true,      // But 100% of errors
  slowRequestThresholdMs: 500, // And anything slow
  alwaysKeepPaths: ['/api/checkout', '/api/payment'],
  alwaysKeepUsers: ['usr_vip_123'],
};
```

## Properties

<APIReference>

<APIMethod name="SamplingConfig.defaultRate" category="SamplingConfig">
<APIMethodContent>
<APIMethodLeft>
<APIDescription>
Base sample rate for normal successful requests.

Value between 0.0 and 1.0. For example, 0.1 means 10% of
successful requests are kept.
</APIDescription>
<APIParameters>
<APIParam name="defaultRate" type="number"  defaultValue="1.0 (keep all)">
Base sample rate for normal successful requests.
</APIParam>
</APIParameters>
</APIMethodLeft>
<APIMethodRight>
<APISignature>{`defaultRate?: number`}</APISignature>
<APIExamples>{`// Default: 1.0 (keep all)`}</APIExamples>
</APIMethodRight>
</APIMethodContent>
</APIMethod>

<APIMethod name="SamplingConfig.alwaysKeepErrors" category="SamplingConfig">
<APIMethodContent>
<APIMethodLeft>
<APIDescription>
Always keep error responses (4xx/5xx status codes).

Highly recommended to leave enabled. Errors are rare and
you want 100% visibility into failures.
</APIDescription>
<APIParameters>
<APIParam name="alwaysKeepErrors" type="boolean"  defaultValue="true">
Always keep error responses (4xx/5xx status codes).
</APIParam>
</APIParameters>
</APIMethodLeft>
<APIMethodRight>
<APISignature>{`alwaysKeepErrors?: boolean`}</APISignature>
<APIExamples>{`// Default: true`}</APIExamples>
</APIMethodRight>
</APIMethodContent>
</APIMethod>

<APIMethod name="SamplingConfig.slowRequestThresholdMs" category="SamplingConfig">
<APIMethodContent>
<APIMethodLeft>
<APIDescription>
Always keep requests slower than this threshold.

Slow requests often indicate problems. This ensures you
capture them even at low sample rates.
</APIDescription>
<APIParameters>
<APIParam name="slowRequestThresholdMs" type="number"  defaultValue="2000 (2 seconds)">
Always keep requests slower than this threshold.
</APIParam>
</APIParameters>
</APIMethodLeft>
<APIMethodRight>
<APISignature>{`slowRequestThresholdMs?: number`}</APISignature>
<APIExamples>{`// Default: 2000 (2 seconds)`}</APIExamples>
</APIMethodRight>
</APIMethodContent>
</APIMethod>

<APIMethod name="SamplingConfig.alwaysKeepPaths" category="SamplingConfig">
<APIMethodContent>
<APIMethodLeft>
<APIDescription>
Always keep requests matching these paths.

Uses substring matching. Useful for critical paths like
checkout, payment, or authentication.
</APIDescription>
<APIParameters>
<APIParam name="alwaysKeepPaths" type="string[]" >
Always keep requests matching these paths.
</APIParam>
</APIParameters>
</APIMethodLeft>
<APIMethodRight>
<APISignature>{`alwaysKeepPaths?: string[]`}</APISignature>

</APIMethodRight>
</APIMethodContent>
</APIMethod>

<APIMethod name="SamplingConfig.alwaysKeepUsers" category="SamplingConfig">
<APIMethodContent>
<APIMethodLeft>
<APIDescription>
Always keep requests from these user IDs.

Useful for debugging specific users or VIP accounts.
Requires `user_id` to be set on the event.
</APIDescription>
<APIParameters>
<APIParam name="alwaysKeepUsers" type="string[]" >
Always keep requests from these user IDs.
</APIParam>
</APIParameters>
</APIMethodLeft>
<APIMethodRight>
<APISignature>{`alwaysKeepUsers?: string[]`}</APISignature>

</APIMethodRight>
</APIMethodContent>
</APIMethod>

</APIReference>
